# 한국 수영장 정보 시스템 - 사용 가이드

## ✅ 시스템 구축 완료!

API 기반 수영장 정보 관리 시스템이 성공적으로 구축되었습니다.

## 📁 프로젝트 구조

```
korea_swim/
├── app/                    # FastAPI 서버
│   ├── main.py            # 메인 앱
│   ├── api/pools.py       # 수영장 API 엔드포인트
│   ├── models/            # DB 모델
│   ├── schemas/           # Pydantic 스키마
│   └── crud/              # DB 작업
├── crawler/               # 데이터 수집 모듈
│   ├── naver_map.py      # 네이버 지도 크롤러
│   ├── kakao_map.py      # 카카오맵 크롤러
│   ├── public_data.py    # 공공데이터 크롤러
│   ├── main.py           # 크롤러 통합 실행
│   └── scheduler.py      # 자동 업데이트
├── database/              # DB 연결
└── test_system.py         # 테스트 스크립트
```

## 🚀 서버 실행 방법

### 1. 서버 시작
```bash
# 방법 1: 배치 파일 사용 (Windows)
run.bat

# 방법 2: 직접 실행
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 2. API 문서 확인
브라우저에서 접속:
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## 🔌 API 사용법

### 주요 엔드포인트

#### 1. 전체 수영장 조회
```bash
GET http://localhost:8000/pools/
```

#### 2. 특정 수영장 조회
```bash
GET http://localhost:8000/pools/1
```

#### 3. 위치 기반 검색 (가장 중요!)
```bash
POST http://localhost:8000/pools/search
Content-Type: application/json

{
  "lat": 37.4979,        # 위도 (예: 강남역)
  "lng": 127.0276,       # 경도
  "radius_km": 5.0,      # 반경 (km)
  "min_price": null,     # 최소 가격 (선택)
  "max_price": 10000,    # 최대 가격 (선택)
  "has_free_swim": true  # 자율수영 가능 (선택)
}
```

#### 4. 수영장 등록
```bash
POST http://localhost:8000/pools/
Content-Type: application/json

{
  "name": "수영장 이름",
  "address": "주소",
  "lat": 37.5012,
  "lng": 127.0396,
  "phone": "02-1234-5678",
  "daily_price": 10000,
  "free_swim_price": 8000,
  "source": "수동등록"
}
```

## 🕷️ 크롤링으로 데이터 수집

### 1. API 키 설정
`.env` 파일 생성:
```bash
# 네이버 개발자센터: https://developers.naver.com/
NAVER_CLIENT_ID=your_client_id
NAVER_CLIENT_SECRET=your_client_secret

# 카카오 개발자센터: https://developers.kakao.com/
KAKAO_API_KEY=your_api_key

# 공공데이터포털: https://www.data.go.kr/
PUBLIC_DATA_API_KEY=your_api_key
```

### 2. 크롤링 실행
```bash
# 모든 크롤러 실행 (네이버 + 카카오 + 공공데이터)
python crawler/main.py
```

### 3. 자동 업데이트 설정
```bash
# 매주 일요일 새벽 3시에 자동 크롤링
python crawler/scheduler.py
```

## 🧪 테스트

```bash
python test_system.py
```

테스트 내용:
- 서버 헬스체크
- 샘플 데이터 추가
- 전체 수영장 조회
- 위치 기반 검색

## 📊 데이터 구조

각 수영장은 다음 정보를 포함:

```json
{
  "id": 1,
  "name": "강남 수영장",
  "address": "서울특별시 강남구 테헤란로 123",
  "lat": 37.5012,
  "lng": 127.0396,
  "phone": "02-1234-5678",
  "operating_hours": {
    "mon": "06:00-22:00",
    "tue": "06:00-22:00"
  },
  "lanes": 8,
  "pool_size": "25m x 15m",
  "water_temp": "28도",
  "facilities": ["사우나", "주차장", "락커룸"],
  "membership_prices": {
    "1month": 150000,
    "3month": 400000,
    "6month": 750000,
    "1year": 1400000
  },
  "daily_price": 10000,
  "free_swim_times": {
    "mon": ["06:00-08:00", "20:00-22:00"]
  },
  "free_swim_price": 8000,
  "lessons": [
    {
      "type": "초급",
      "price": 200000,
      "schedule": "월수금 19:00"
    }
  ],
  "source": "네이버",
  "rating": 4.5,
  "last_updated": "2025-10-01T05:20:00"
}
```

## 🎯 다음 단계 (프론트엔드)

1. React/Next.js로 웹 인터페이스 구축
2. 카카오맵/네이버맵 API 연동하여 지도에 표시
3. 사용자 위치 기반 자동 검색
4. 가격 비교 차트
5. 리뷰 및 평점 시스템
6. 즐겨찾기 기능

## 💡 지금 바로 테스트해보세요!

1. 서버가 실행 중입니다: http://localhost:8000
2. API 문서: http://localhost:8000/docs
3. 테스트: `python test_system.py`

**집 근처 수영장을 찾으려면:**
1. Google Maps에서 집 주소의 위도/경도 확인
2. `/pools/search` API에 위도/경도 입력
3. 반경 내 수영장 목록 확인!
